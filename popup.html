<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <style>
    /* Global Reset */
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
        width: 400px;
        /* Small and compact */
        background-color: transparent;
        /* Allows the container to define the shape */
        padding: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* The "Floating" Container */
    .search-container {
        display: flex;
        width: 100%;
        background: rgba(30, 30, 30, 0.95);
        /* Dark semi-transparent background */
        backdrop-filter: blur(10px);
        /* Glassmorphism effect */
        border-radius: 50px;
        /* Pill shape */
        padding: 8px 8px 8px 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.1);
        align-items: center;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .search-container:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.4);
        border-color: rgba(255, 255, 255, 0.2);
    }

    /* Input Field */
    #query {
        flex-grow: 1;
        background: transparent;
        border: none;
        color: #ffffff;
        font-size: 16px;
        outline: none;
        padding-right: 10px;
    }

    #query::placeholder {
        color: rgba(255, 255, 255, 0.5);
    }

    /* Search Button */
    #searchBtn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: transform 0.2s ease, filter 0.2s ease;
        flex-shrink: 0;
    }

    #searchBtn:hover {
        transform: scale(1.05);
        filter: brightness(1.1);
    }

    #searchBtn:active {
        transform: scale(0.95);
    }

    /* Search Icon (SVG) */
    .search-icon {
        width: 18px;
        height: 18px;
        fill: none;
        stroke: white;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
    }
  </style>
</head>

<body>
  <div class="search-container">
    <input type="text" id="query" placeholder="Ask AI how to..." autocomplete="off" autofocus>
    <button id="searchBtn" title="Ask AI">
      <svg class="search-icon" viewBox="0 0 24 24">
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </button>
  </div>

  <div id="apiKeySection" style="display: none; padding: 10px; color: white;">
    <input type="password" id="apiKeyInput" placeholder="Enter Gemini API Key"
      style="width: 100%; padding: 5px; margin-bottom: 5px;">
    <div style="display: flex; gap: 5px;">
      <button id="saveKeyBtn" style="flex: 1; cursor: pointer;">Save Key</button>
      <button id="resetKeyBtn"
        style="flex: 1; cursor: pointer; background: rgba(255, 100, 100, 0.2); border: 1px solid rgba(255, 100, 100, 0.5); color: white;">Reset
        Key</button>
    </div>
  </div>

  <div id="responseContainer"
    style="display: none; color: white; margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.5); border-radius: 10px;">
    <div id="stepCounter" style="font-size: 12px; color: #aaa; margin-bottom: 5px; font-weight: bold;"></div>
    <p id="responseText" style="line-height: 1.4;">Thinking...</p>
    <div class="nav-controls" style="display: flex; gap: 10px; margin-top: 10px;">
      <button id="prevBtn" style="flex: 1; padding: 5px; cursor: pointer; display: none;">&lt; Prev</button>
      <button id="nextBtn" style="flex: 1; padding: 5px; cursor: pointer; display: none;">Next &gt;</button>
    </div>
    <div style="display: flex; gap: 5px; margin-top: 10px;">
      <button id="newSearchBtn"
        style="flex: 1; padding: 5px; background: rgba(100, 100, 255, 0.2); border: 1px solid rgba(100, 100, 255, 0.5); color: white; cursor: pointer;">New
        Search</button>
      <button id="resetBtn"
        style="flex: 1; padding: 5px; background: rgba(255, 100, 100, 0.2); border: 1px solid rgba(255, 100, 100, 0.5); color: white; cursor: pointer;">Full
        Reset</button>
    </div>
  </div>

  <script src="popup.js"></script>
</body>

</html>